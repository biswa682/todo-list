<!DOCTYPE html>
<html>
<head>
	<title></title>
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
	<link rel="stylesheet" type="text/css" href="todo-list3.css">
</head>
<body>
	<div id="todo-body" class="todo-body">
		<div class="insert-list">
			<input type="text" name="input-data" id="input-data" class="input-data">
			<button id="add-btn" class="add-btn">ADD</button>
		</div>
		<ul id="list-item">
			<!-- <li>
				<input type='checkbox' name='work-done-btn' class='work-done-btn' id='work-done-btn'>
				<p id='input-para'>iuhugofihegjj fiuee rii uiuhh iugg oiu u uwe rqhuoh ruhfusafk uewuii iodshf oh iosa hioia hi isagousd go oe hoe oisd fods fds g is ids nfdss g a i sd gasn  nasddn gsg asg lsgslkg s dkfg g</p>
				<i class="fa fa-close" style="font-size:24px"></i>
			</li> -->
		</ul>
	</div>
</body>
<script type="text/javascript">
	var valueNo = 0;
	function addList(){
		var input_data = document.getElementById('input-data');
		if(input_data.value != ""){
			var li_tag = document.createElement('li');
			// alert(li_tag);
			li_tag.className = 'list-elements';
			li_tag.setAttribute("value",++valueNo);
			li_tag.setAttribute("draggable","true");
			var checkbox = document.createElement('input');
			checkbox.type = 'checkbox';
			checkbox.name = 'work-done-btn';
			checkbox.id = 'work-done-btn';
			checkbox.className = 'work-done-btn';

			var para = document.createElement('p');
			para.id = 'input-para';
			var text = document.createTextNode(input_data.value);
			para.appendChild(text);

			var cancel = document.createElement('i');
			cancel.className = 'fa fa-close';
			cancel.style = 'font-size:24px';

			li_tag.appendChild(checkbox);
			li_tag.appendChild(para);
			li_tag.appendChild(cancel);
			
			var ul_tag = document.getElementById('list-item');
			ul_tag.appendChild(li_tag);
			
			input_data.value = "";
		}
		else{
			
		}
	}

	function addStroke(event){
		var checkbox = event.target.tagName;
		if( checkbox == 'INPUT'){
			var para = event.target.nextSibling;
			if(event.target.checked == true){
				para.style.setProperty("text-decoration","line-through");
			}
			else{
				para.style.setProperty("text-decoration","none");
			}

		}
	}

	function deleteList(event){
		var no = event.target.tagName;
		if(no == 'I'){
			var main_list = event.target.parentNode;
			main_list.remove();
		}
	}
	// }
	// var selectedElement = null;
	// function dragPossible(event){
	// 	event.preventDefault();
	// 	var currentList = event.target;
	// 	if(event.target.tagName === selectedElement.tagName && event.target !== selectedElement){
	// 		//var nextSiblingValue = event.target.nextSibling;
	// 		currentList.style.visibility = 'hidden';
	// 		// selectedElement.remove();
	// 		// currentList.style.visibility = 'visible';
			
	// 	}
	// }

	// function dragUp(event){
	// 	selectedElement = event.target;
	// 	event.dataTransfer.setData('text/html', event.target);
		
	// }

	// function dragDown(event){
	// 	var dropEl = event.target;
	// 	// var main_un = document.getElementById('list-item');
	// 	if(dropEl != selectedElement){
			
	// 		// if(dropEl.tagName == 'LI' || dropEl.tagName == 'P' || dropEl.tagName == 'I'){
	// 		// 	dropEl = dropEl.parentNode;
	// 		// }

	// 		// dropEl.parentNode.removeChild(selectedElement);
	// 		// dropEl.parentNode.insertBefore(selectedElement, dropEl);
	// 		// var value = event.dataTransfer.getData('text/html');
	// 		// dropEl.parentNode.removeChild(selectedElement);
	// 		// console.log(dropEl.nextSibling);
	// 		// if(dropEl.nextSibling){
	// 		// 	console.log("available");
	// 		// }
	// 		// else{
	// 		// 	console.log("not available");
	// 		// }
	// 	}

	// }

	
	// var selectedElement = null;
	// function dragEnter(event){
	// 	event.preventDefault();
	// 	var currentList = event.target;
	// 	if(event.target.tagName === selectedElement.tagName && event.target !== selectedElement){			
	// 		currentList.style.visibility = 'hidden';
	// 	}
	// }	
	var selectedElement = null;
	var currentElement = null;
	function dragStart(event){
		// console.log(event.target);
		event.dataTransfer.setData('text/html', event.target);
		selectedElement = event.target;
	}

	function dragEnter(event){
		// event.preventDefault();
		// if(currentElement != null){
		// 	if(event.target != currentElement){
		// 		currentElement.style.visibility = 'visible';
		// 	}
		// }


		// if(event.target.tagName === selectedElement.tagName && event.target !== selectedElement){
		// 	event.target.style.visibility = 'hidden';			
		// }



		// currentElement = event.target;
	}

	function dragOver(event){
		event.preventDefault();
		event.stopPropagation();
	}

	function dragLeave(event){
		event.preventDefault();
		event.stopPropagation();
	//	if(event.target.tagName === selectedElement.tagName && event.target !== selectedElement){
			
			// console.log(event.target);
			
	//	}
	}

	function dragEnd(event){
		// console.log(event.target);	
	}

	function dropElement(event){
		// alert(event.target);
		var newList = selectedElement;
		var currentDropBox = null;
		if(event.target.tagName == 'INDEX' || event.target.tagName == 'P' || event.target.tagName == 'I'){
			currentDropBox = event.target.parentNode;
		}
		else if(event.target.tagName == 'LI'){
			currentDropBox = event.target;
		}

		if(currentDropBox.tagName === selectedElement.tagName && currentDropBox !== selectedElement){
			selectedElement.remove();
			currentDropBox.parentNode.insertBefore(newList, currentDropBox.nextSibling);
		}
	}
	document.getElementById('input-data').addEventListener("keyup",addList);
	// document.getElementById('add-btn').addEventListener("click", addList);
	document.getElementById('list-item').addEventListener("click", addStroke);
	document.getElementById('list-item').addEventListener("click", deleteList);
	document.getElementById('list-item').addEventListener("dragstart", dragStart);
	document.getElementById('list-item').addEventListener("dragover", dragOver);
	// document.getElementById('list-item').addEventListener("dragleave", dragLeave);
	document.getElementById('list-item').addEventListener("drop", dropElement);
</script>
</html>